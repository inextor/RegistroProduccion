<div class="container-fluid"  style="max-width:900px;margin: 0 auto">
	<div class="row align-middle">
		<div class="col-10">
			<h4 class="my-3">Nóminas</h4>
		</div>
		<div class="col-2">
			<a routerLink="/generar-nomina-alterno" class="btn btn-primary mt-2">Agregar</a>
		</div>
	</div>
	<div class="card p-3">
		<div class="row">
			<div class="col-md-6">
				<div class="form-group">
					<label>Fecha Desde</label>
					<input type="date" class="form-control" [(ngModel)]="search_from_date">
				</div>
			</div>
			<div class="col-md-6 form-group">
				<label>&nbsp;</label>
				<div>
					<button class="btn btn-primary" (click)="search()">Buscar</button>
				</div>
			</div>
		</div>
		<table class="table">
			<thead>
				<tr>
					<th>ID</th>
					<th style="width:30%;padding-left:0">Usuario</th>
					<th style="width:25%;padding-start:0;padding-right:0">Periodo</th>
					<th class="text-end">Total</th>
					<th class="text-end">Pagado</th>
					<th class="text-end" style="width:20%">Acciones</th>
				</tr>
			</thead>
			<tbody>
				<tr *ngFor="let pi of payroll_list">
					<td>{{pi.payroll.id}}</td>
					<td style="width:25%;padding-left:0;padding-right:0">{{pi.user.name}}</td>
					<td style="width:20%;padding-left:0;padding-right:0">{{pi.payroll.start_date | shortDate}} a {{pi.payroll.end_date|shortDate}}</td>
					<td class="text-end">{{pi.payroll.total | currency }}</td>
					<td class="text-end">
						@if( pi.payroll.paid_timestamp == null )
						{
							<button type="button" class="btn btn-primary" (click)="markAsPaid(pi)">Pagar</button>
												}
						@else
						{
							{{pi.payroll.paid_timestamp | localDate | shortDate}}
						}
					</td>
					<th style="width:35%;" class="px-0 text-end">
						<a [routerLink]="['/view-payroll', pi.payroll.id]" class="btn btn-secondary" title="Ver detalles de la nómina">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 12q-1.65 0-2.825-1.175T8 8t1.175-2.825T12 4t2.825 1.175T16 8t-1.175 2.825T12 12m-8 8v-2.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13t3.25.388t3.15 1.162q.725.375 1.163 1.088T20 17.2V20z"/></svg>
						</a>
						<a [routerLink]="['/detalle-nomina-usuario']" [queryParams]="{user_id: pi.user.id, start_date: pi.payroll.start_date, end_date: pi.payroll.end_date}" class="btn btn-primary mx-1" title="Ver detalle de nómina del usuario">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"/></svg>
						</a>
						<a [routerLink]="['/ver-estado-de-cuenta']" [queryParams]="{user_id:pi.user.id}" class="btn btn-info mx-1" title="Ver estado de cuenta">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm0 2h7v5h5v11H6zm2 8v2h8v-2zm0 4v2h5v-2z"/></svg>
						</a>
						<a [routerLink]="['/generar-nomina-alterno']"  [queryParams]="{production_area_id:pi.user.production_area_id,start_date:pi.payroll.start_date, end_date:pi.payroll.end_date}" class="btn btn-secondary" title="Generar nómina">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9A3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42c-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3a3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3a3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9c-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65c2.56.34 4.45 1.51 4.45 2.9z"/></svg>
						</a>
						<a [routerLink]="['/print-nomina-in-list']" [queryParams]="{production_area_id:pi.user.production_area_id,start_date:pi.payroll.start_date, end_date:pi.payroll.end_date}" class="btn btn-secondary mx-1" title="Imprimir nómina">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#ef5350" d="M13 9h5.5L13 3.5zM6 2h8l6 6v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m4.93 10.44c.41.9.93 1.64 1.53 2.15l.41.32c-.87.16-2.07.44-3.34.93l-.11.04l.5-1.04c.45-.87.78-1.66 1.01-2.4m6.48 3.81c.18-.18.27-.41.28-.66c.03-.2-.02-.39-.12-.55c-.29-.47-1.04-.69-2.28-.69l-1.29.07l-.87-.58c-.63-.52-1.2-1.43-1.6-2.56l.04-.14c.33-1.33.64-2.94-.02-3.6a.85.85 0 0 0-.61-.24h-.24c-.37 0-.7.39-.79.77c-.37 1.33-.15 2.06.22 3.27v.01c-.25.88-.57 1.9-1.08 2.93l-.96 1.8l-.89.49c-1.2.75-1.77 1.59-1.88 2.12c-.04.19-.02.36.05.54l.03.05l.48.31l.44.11c.81 0 1.73-.95 2.97-3.07l.18-.07c1.03-.33 2.31-.56 4.03-.75c1.03.51 2.24.74 3 .74c.44 0 .74-.11.91-.3m-.41-.71l.09.11c-.01.1-.04.11-.09.13h-.04l-.19.02c-.46 0-1.17-.19-1.9-.51c.09-.1.13-.1.23-.1c1.4 0 1.8.25 1.9.35M7.83 17c-.65 1.19-1.24 1.85-1.69 2c.05-.38.5-1.04 1.21-1.69zm3.02-6.91c-.23-.9-.24-1.63-.07-2.05l.07-.12l.15.05c.17.24.19.56.09 1.1l-.03.16l-.16.82z"/></svg>
						</a>
						<a [routerLink]="['/print-nomina-in-list']" [queryParams]="{production_area_id:pi.user.production_area_id,start_date:pi.payroll.start_date, end_date:pi.payroll.end_date}" class="btn btn-info mx-1" title="Reporte Detallado">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"/></svg>
						</a>
						<button type="button" class="btn btn-danger ms-1" (click)="deletePayrroll(pi)" title="Eliminar nómina">
								<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"><path fill="none" d="M296 64h-80a7.91 7.91 0 0 0-8 8v24h96V72a7.91 7.91 0 0 0-8-8"/><path fill="currentColor" d="M432 96h-96V72a40 40 0 0 0-40-40h-80a40 40 0 0 0-40 40v24H80a16 16 0 0 0 0 32h17l19 304.92c1.42 26.85 22 47.08 48 47.08h184c26.13 0 46.3-19.78 48-47l19-305h17a16 16 0 0 0 0-32M192.57 416H192a16 16 0 0 1-16-15.43l-8-224a16 16 0 1 1 32-1.14l8 224A16 16 0 0 1 192.57 416M272 400a16 16 0 0 1-32 0V176a16 16 0 0 1 32 0Zm32-304h-96V72a7.91 7.91 0 0 1 8-8h80a7.91 7.91 0 0 1 8 8Zm32 304.57A16 16 0 0 1 320 416h-.58A16 16 0 0 1 304 399.43l8-224a16 16 0 1 1 32 1.14Z"/></svg>
						</button>
					</th>
				</tr>
			</tbody>
		</table>
		<app-pagination
			[path]="'/listar-nominas'"
			[total_pages]="total_pages"
			[current_page]="page">
		</app-pagination>
	</div>
</div>
